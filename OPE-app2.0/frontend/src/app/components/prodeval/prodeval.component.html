<div class="background"></div>

<div id="main">
  <div>
    <div id="prod-title">
        <h1>{{title}}</h1>
    </div>
    <div id="verdict">
      <h2 id="verdict_text">Product Summary:
        Based from the reviews, {{formatProbability(positivePercent)}} are positive about this product.
      </h2>
    </div>
  </div>
  <div class="navbar">
    <h1 id="top-aspects-title">6 Most Mentioned Keywords:</h1>
    <nav>
      <ul>
        <li *ngFor="let aspect of top_aspects" (click)="onAspectClick(aspect)" [class.active]="currentAspect === aspect">{{aspect}}</li>
      </ul>
    </nav>
  </div>
  <div id="raw-sentiment-score" *ngIf="currentAspect">
    <div id="chart-section">
      <h1>{{ currentAspect | uppercase }} SUMMARY</h1>
      <h2>Description</h2>
      <p>{{summary}}</p>
      <br>
      <div id="chart-breakdown">
        <div id="chart-figure">
          <h2>Ratio of Positive and Negative Reviews</h2>
          <div>
            <div *ngFor="let pieChart of pieCharts | keyvalue">
              <div class="bar" *ngIf="pieChart.key === currentAspect" [chart]="pieChart.value"></div>
            </div>
          </div>
        </div>
        <div id="chart-frequency">
          <h2>How did we calculate the ratio?</h2>
          <p>
            We calculated the ratio by counting the number of times <span class="highlight">{{currentAspect}}</span> appeared in the positive reviews and negative reviews over the total number of reviews it appeared on. </p>
            <p>The number of times camera appeared on positive reviews is <span class="highlight">{{ posCount }}</span> and the number of times it appeared on negative reviews is <span class="highlight">{{ negCount }}</span> resulting in a total of <span class="highlight">{{ frequency }}</span>.
          </p>
          
          <!-- <table id="frequency-table">
            <tr>
              <td>Positive Reviews</td>
              <td>{{posCount}}</td>
            </tr>
            <tr>
              <td>Negative Reviews</td>
              <td>{{negCount}}</td>
            </tr>
            <tr>
              <td>Total</td>
              <td>{{frequency}}</td>
            </tr>
          </table> -->

          <h2>( {{posCount}} / {{frequency}} ) * 100 = {{formatProbability(posPercent)}}</h2>
          <h2>( {{negCount}} / {{frequency}} ) * 100 = {{formatProbability(negPercent)}}</h2>
        </div>
      </div>
      <br>
      <div id="review_list" style="display: flex;">
        <div style="flex: 1; margin-right: 10px;">
          <h2>List of Positive Reviews</h2>
          <div id="aspect-breakdown-list">
            <table>
              <tr>
                <th>Sentence</th>
                <th>Label</th>
                <th>Score</th>
              </tr>
              <tr *ngFor="let pos_aspect_phrase of pos_aspect_phrases">
                <td>
                  <ng-container *ngFor="let word of pos_aspect_phrase.words">
                    <span [ngClass]="{ 'wordhighlight': word.highlight }">{{ word.text }}</span>
                  </ng-container>
                </td>
                <td>{{ pos_aspect_phrase.label }}</td>
                <td>{{ formatProbability(pos_aspect_phrase.probability) }}</td>
              </tr>
              
            </table>
          </div>
        </div>
        <div style="flex: 1; margin-left: 10px;">
          <h2>List of Negative Reviews</h2>
          <div id="aspect-breakdown-list">
            <table>
              <tr>
                <th>Sentence</th>
                <th>Label</th>
                <th>Score</th>
              </tr>
              <tr *ngFor="let neg_aspect_phrase of neg_aspect_phrases">
                <td>
                  <ng-container *ngFor="let word of neg_aspect_phrase.words">
                    <span [ngClass]="{ 'wordlowlight': word.highlight }">{{ word.text }}</span>
                  </ng-container>
                </td>
                <td>{{ neg_aspect_phrase.label }}</td>
                <td>{{ formatProbability(neg_aspect_phrase.probability) }}</td>
              </tr>
            </table>
          </div>
        </div>
      </div>
         
    </div>
  </div>
</div> 

<div style="display: block; height: 100px;"></div>